[gd_resource type="Resource" script_class="ReframeCompositorEffectPreset" load_steps=2 format=3 uid="uid://b76nvfd7vfg30"]

[ext_resource type="Script" uid="uid://b88yvpo0ox613" path="res://addons/reframe/compositor/scripts/src_reframe_compsitor_effect_preset.gd" id="1_13rnp"]

[resource]
script = ExtResource("1_13rnp")
name = "Vignette"
shader_functions_code = "float RandValueByIndex(vec2 Index_In)
{
    vec3 p3 = fract(vec3(Index_In.x, Index_In.y, Index_In.x) * 0.1031);  // Scramble index into small range for each channel 
    p3 += dot(p3, p3.yzx + 33.33);                                                                      // Scrables by shuffling yxz to remove repetition
    return fract((p3.x + p3.y) * p3.z);                                                                // Collapse and ensure range of 0-1
}

float GaussianDistribution(vec2 Index_In)
{
    /*
    Uses Box-Muller transform to calculate guass/normal distribution from to pair numbers between 0-1
    mean = 0, std dev = 1
    */
    float u1 = max(RandValueByIndex(Index_In), 1e-6);
    float u2 = RandValueByIndex(Index_In + vec2(17.0, 23.0));    
    return sqrt(-2.0 * log(u1)) * cos(6.2831853 * u2);
}"
shader_main_code = "// Vignette
float radius = 2;
float softness = 3;"
metadata/_custom_type_script = "uid://b88yvpo0ox613"
